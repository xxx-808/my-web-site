# 🗄️ Tiffany's College 数据库配置指南

## 🎯 项目概述

Tiffany's College 是一家融合认知语言科学与AI技术的创新型教育科技企业，专注于通过雅思培训切入学术英语能力培养市场。公司独创"认知诊断-策略指导-能力迁移"三维培养模型。

## 🏗️ 技术架构

### 核心技术栈
- **数据库**: PostgreSQL (企业级、支持JSON、全文搜索)
- **ORM**: Prisma (类型安全、自动迁移)
- **认证**: NextAuth.js (企业级认证)
- **缓存**: Redis (性能优化)
- **AI集成**: OpenAI/Anthropic (认知分析)

### 数据库设计理念
- **认知科学导向**: 基于认知语言科学的用户模型
- **个性化学习**: 支持VARK学习风格和认知偏好
- **母语负迁移分析**: 专门针对中国学生的语言学习障碍
- **企业级安全**: IP绑定、防录屏、权限管理

## 🚀 快速开始

### 1. 安装依赖
```bash
npm install
```

### 2. 环境配置
创建 `.env.local` 文件：
```env
# Database
DATABASE_URL="postgresql://username:password@localhost:5432/tiffanys_college_db"

# NextAuth.js
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-super-secret-key-here"

# JWT
JWT_SECRET="your-jwt-secret-key-here"

# Redis
REDIS_URL="redis://localhost:6379"
```

### 3. 数据库设置
```bash
# 生成Prisma客户端
npm run db:generate

# 推送到数据库
npm run db:push

# 运行种子数据
npm run db:seed

# 打开数据库管理界面
npm run db:studio
```

## 📊 数据库模型

### 核心实体

#### 用户系统 (User)
- **多角色支持**: 学生、教师、管理员、研究员
- **认知档案**: 语言能力评估、学习风格、认知特征
- **母语负迁移分析**: 识别中文干扰点和认知障碍

#### 课程系统 (Course)
- **认知科学设计**: 认知目标、学习策略、评估方法
- **模块化结构**: 支持渐进式学习和个性化路径
- **雅思分类**: 写作、口语、阅读、听力四大模块

#### 视频系统 (Video)
- **访问控制**: IP绑定、用户权限、时间限制
- **认知设计**: 认知目标、学习策略、难度等级
- **安全保护**: 防录屏、防下载、水印技术

#### 学习分析 (Progress & Assessment)
- **认知进度**: 各维度能力评分、学习效率
- **策略追踪**: 使用的学习策略、交互数据
- **个性化建议**: 基于认知数据的推荐

## 🔐 安全特性

### 访问控制
- **IP地址绑定**: 每个用户绑定特定IP地址
- **权限管理**: 基于角色的访问控制
- **时间限制**: 支持权限到期管理

### 内容保护
- **防录屏**: 技术手段防止屏幕录制
- **防下载**: 禁止视频文件下载
- **水印技术**: 动态水印标识用户身份

### 数据安全
- **密码加密**: bcrypt哈希加密
- **JWT认证**: 安全的身份验证
- **审计日志**: 完整的访问记录

## 🧠 认知科学特性

### 认知诊断
- **语言能力评估**: 听说读写四个维度
- **认知特征分析**: 学习节奏、记忆类型、注意力
- **母语干扰识别**: 中文语法结构影响分析

### 策略指导
- **个性化学习路径**: 基于认知档案的推荐
- **VARK学习风格**: 视觉、听觉、阅读、动觉
- **认知节奏控制**: 自适应播放速度

### 能力迁移
- **学习策略追踪**: 记录有效的学习方法
- **认知进度监控**: 实时跟踪能力提升
- **迁移效果评估**: 评估学习效果

## 📈 企业级功能

### 数据分析
- **学习行为分析**: 用户行为模式识别
- **认知能力评估**: 科学的能力测评体系
- **学习效果追踪**: 长期学习效果监控

### 商业支持
- **多级定价**: 支持不同用户群体的定价策略
- **订阅管理**: 灵活的课程订阅系统
- **用户管理**: 完整的用户生命周期管理

### 扩展性
- **AI集成**: 支持OpenAI/Anthropic等AI服务
- **多语言**: 支持中英文双语界面
- **移动端**: 响应式设计，支持移动设备

## 🛠️ 开发工具

### 数据库管理
```bash
# 查看数据库状态
npm run db:studio

# 创建迁移
npm run db:migrate

# 重置数据库
npm run db:push --force-reset
```

### 开发调试
```bash
# 开发模式
npm run dev

# 构建项目
npm run build

# 代码检查
npm run lint
```

## 🔮 未来规划

### 短期目标 (1-3个月)
- [ ] 完善用户认证系统
- [ ] 实现视频播放功能
- [ ] 建立基础数据分析

### 中期目标 (3-6个月)
- [ ] 集成AI认知分析
- [ ] 实现个性化推荐
- [ ] 建立完整的学习路径

### 长期目标 (6-12个月)
- [ ] 扩展到更多语言考试
- [ ] 建立研究合作网络
- [ ] 国际化部署

## 📞 技术支持

如有技术问题，请联系：
- **技术团队**: tech@tiffanyscollege.com
- **产品团队**: product@tiffanyscollege.com
- **研究团队**: research@tiffanyscollege.com

---

*Tiffany's College - 融合认知语言科学与AI技术的创新教育科技*
