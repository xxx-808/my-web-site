# 🎥 视频上传完整指南

## 📋 上传前准备

### 1. 管理员权限
- 您需要使用管理员账户登录
- 测试管理员账户：`admin@test.com` / `admin123`

### 2. 视频文件要求
- **格式支持**：MP4、WebM、QuickTime、AVI
- **文件大小**：最大 500MB
- **推荐格式**：MP4 (兼容性最好)
- **推荐分辨率**：1280x720 (720p) 或 1920x1080 (1080p)

### 3. 缩略图要求
- **格式支持**：JPEG、PNG、WebP
- **文件大小**：最大 10MB
- **推荐尺寸**：800x450 (16:9比例)

## 🚀 上传步骤

### 第1步：登录管理员面板
1. 访问：http://localhost:3000/admin-login (本地) 或 https://your-domain.vercel.app/admin-login
2. 使用管理员账户登录

### 第2步：进入视频管理
1. 登录后会自动跳转到管理员面板
2. 点击"视频管理"或直接访问 `/admin/video-management`

### 第3步：上传视频文件
1. 在"上传新视频"标签页中
2. **上传视频文件**：
   - 点击"选择视频文件"或拖拽文件到上传区域
   - 等待上传完成（显示绿色进度条）
3. **上传缩略图**：
   - 点击"选择缩略图"或拖拽图片文件
   - 系统会自动调整图片尺寸

### 第4步：填写视频信息
1. **标题**：输入视频的标题
2. **分类**：选择听说读写分类
   - 👂 雅思听力
   - 🗣️ 雅思口语  
   - 📖 雅思阅读
   - ✍️ 雅思写作
3. **描述**：详细描述视频内容
4. **访问级别**：
   - **BASIC**：免费用户可观看
   - **PREMIUM**：付费用户专享

### 第5步：发布视频
1. 确认所有信息填写完整
2. 点击"添加视频"按钮
3. 等待系统处理完成

## 📁 文件存储位置

上传的文件会存储在：
- **视频文件**：`public/uploads/videos/`
- **缩略图**：`public/uploads/thumbnails/`
- **访问URL**：`/uploads/videos/filename.mp4`

## 🔧 技术细节

### 上传API端点
- **视频上传**：`POST /api/upload/video`
- **缩略图上传**：`POST /api/upload/thumbnail`

### 文件命名规则
- 时间戳 + 原文件名：`1640995200000_my_video.mp4`
- 特殊字符会被替换为下划线

### 权限验证
- 需要管理员身份验证
- 使用NextAuth会话验证

## 🎯 上传后管理

### 查看已上传视频
1. 切换到"管理视频"标签页
2. 可以看到所有已上传的视频列表
3. 支持编辑、删除、状态管理

### 批量操作
1. 切换到"批量操作"标签页
2. 选择多个视频进行批量管理
3. 支持批量删除、状态更改

### 访问权限管理
1. 切换到"访问管理"标签页
2. 为特定用户分配视频访问权限
3. 设置访问期限

## 🚨 常见问题

### Q: 上传失败怎么办？
A: 检查以下几点：
- 文件格式是否支持
- 文件大小是否超限
- 网络连接是否稳定
- 是否使用管理员账户

### Q: 视频无法播放？
A: 可能原因：
- 视频格式不兼容（建议使用MP4）
- 视频编码问题
- 文件损坏

### Q: 如何修改已上传的视频？
A: 在"管理视频"标签页中：
- 点击视频条目的"编辑"按钮
- 修改标题、描述、分类等信息
- 保存更改

### Q: 如何删除视频？
A: 在"管理视频"标签页中：
- 点击视频条目的"删除"按钮
- 确认删除操作
- 文件会从服务器中移除

## 📱 移动端上传

目前系统支持移动端浏览器上传，但建议使用桌面端以获得更好的体验。

## 🔐 安全注意事项

1. **仅管理员可上传**：确保账户安全
2. **文件类型验证**：系统会验证文件类型
3. **大小限制**：防止恶意大文件上传
4. **文件名清理**：自动处理特殊字符

---

## 📞 技术支持

如果遇到上传问题，请检查：
1. 浏览器控制台是否有错误信息
2. 网络连接是否正常
3. 文件是否符合要求
4. 管理员权限是否正确